{"version":3,"sources":["components/utility/FormValidation.js","components/FormErrors.js","components/auth/ChangePassword.js"],"names":["validateForm","event","state","inputs","document","getElementsByClassName","i","length","classList","contains","remove","hasOwnProperty","username","getElementById","add","blankfield","firstname","lastname","email","verificationcode","password","oldpassword","newpassword","confirmpassword","passwordmatch","FormErrors","props","formerrors","className","apierrors","cognito","message","code","ChangePassword","errors","clearErrorState","setState","handleSubmit","a","preventDefault","error","Validate","Auth","currentAuthenticatedUser","user","changePassword","window","location","href","onInputChange","target","id","value","this","onSubmit","label","type","onChange","margin","fullWidth","variant","color","Component"],"mappings":"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","file":"static/js/9.90dbdcf1.chunk.js","sourcesContent":["function validateForm(event, state) {\n  // clear all error messages\n  const inputs = document.getElementsByClassName(\"is-danger\");\n  for (let i = 0; i < inputs.length; i++) {\n    if (!inputs[i].classList.contains(\"error\")) {\n      inputs[i].classList.remove(\"is-danger\");\n    }\n  }\n\n  if (state.hasOwnProperty(\"username\") && state.username === \"\") {\n    document.getElementById(\"username\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"firstname\") && state.firstname === \"\") {\n    document.getElementById(\"firstname\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"lastname\") && state.lastname === \"\") {\n    document.getElementById(\"lastname\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"email\") && state.email === \"\") {\n    document.getElementById(\"email\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (\n    state.hasOwnProperty(\"verificationcode\") &&\n    state.verificationcode === \"\"\n  ) {\n    document.getElementById(\"verificationcode\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"password\") && state.password === \"\") {\n    document.getElementById(\"password\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"oldpassword\") && state.oldpassword === \"\") {\n    document.getElementById(\"oldpassword\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"newpassword\") && state.newpassword === \"\") {\n    document.getElementById(\"newpassword\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"confirmpassword\") && state.confirmpassword === \"\") {\n    document.getElementById(\"confirmpassword\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (\n    state.hasOwnProperty(\"password\") &&\n    state.hasOwnProperty(\"confirmpassword\") &&\n    state.password !== state.confirmpassword\n  ) {\n    document.getElementById(\"password\").classList.add(\"is-danger\");\n    document.getElementById(\"confirmpassword\").classList.add(\"is-danger\");\n    return { passwordmatch: true };\n  }\n  if (\n    state.hasOwnProperty(\"newpassword\") &&\n    state.hasOwnProperty(\"confirmpassword\") &&\n    state.newpassword !== state.confirmpassword\n  ) {\n    document.getElementById(\"newpassword\").classList.add(\"is-danger\");\n    document.getElementById(\"confirmpassword\").classList.add(\"is-danger\");\n    return { passwordmatch: true };\n  }\n  return;\n}\n\nexport default validateForm;\n","import React from 'react';\n\nfunction FormErrors(props) {\n    if (props.formerrors && (props.formerrors.blankfield || props.formerrors.passwordmatch)) {\n        return (\n            <div className=\"error container help is-danger\">\n                <div className=\"row justify-content-center\">\n                    {props.formerrors.passwordmatch ? 'Password value does not match confirm password value' : ''}\n                </div>\n                <div className=\"row justify-content-center help is-danger\">{props.formerrors.blankfield ? 'All fields are required' : ''}</div>\n            </div>\n        );\n    } else if (props.apierrors) {\n        return (\n            <div className=\"error container help is-danger\">\n                <div className=\"row justify-content-center\">{props.apierrors}</div>\n            </div>\n        );\n    } else if (props.formerrors && props.formerrors.cognito) {\n        return (\n            <div className=\"error container help is-danger\">\n                <div className=\"row justify-content-center\">{props.formerrors.cognito.message}</div>\n            </div>\n        );\n    } else if (props.formerrors && props.formerrors.code) {\n        return (\n            <div className=\"error container help is-danger\">\n                <div className=\"row justify-content-center\">{props.formerrors.message}</div>\n            </div>\n        );\n    } else {\n        return <div />;\n    }\n}\n\nexport default FormErrors;\n","import React, { Component } from 'react';\nimport FormErrors from \"../FormErrors\";\nimport Validate from \"../utility/FormValidation\";\nimport { Auth } from 'aws-amplify';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\n\nclass ChangePassword extends Component {\n  state = {\n    oldpassword: \"\",\n    newpassword: \"\",\n    confirmpassword: \"\",\n    errors: {\n      cognito: null,\n      blankfield: false,\n      passwordmatch: false\n    }\n  }\n\n  clearErrorState = () => {\n    this.setState({\n      errors: {\n        cognito: null,\n        blankfield: false,\n        passwordmatch: false\n      }\n    });\n  }\n\n  handleSubmit = async event => {\n    event.preventDefault();\n\n    // Form validation\n    this.clearErrorState();\n    //console.log(\"validate input\",this.state)\n    const error = Validate(event, this.state);\n    if (error) {\n      this.setState({\n        errors: { ...this.state.errors, ...error }\n      });\n    }\n\n    if(!error){\n\n      // AWS Cognito integration here\n      try {\n        const user = await Auth.currentAuthenticatedUser();\n        //console.log(user);\n        await Auth.changePassword(\n          user,\n          this.state.oldpassword,\n          this.state.newpassword\n        );\n        window.location.href = \"/changepasswordconfirm\";\n      } catch(error) {\n        //console.log(error);\n        this.setState({\n          errors:{...this.state.errors, ...error}\n        })\n\n      }\n    }\n    \n    \n  };\n\n  onInputChange = event => {\n    this.setState({\n      [event.target.id]: event.target.value\n    });\n    document.getElementById(event.target.id).classList.remove(\"is-danger\");\n  }\n\n  render() {\n    //console.log(\"render\",this.state.errors)\n    return (\n      <section className=\"section auth\">\n        <div className=\"container\">\n          <h1>Change Password</h1>\n          <FormErrors formerrors={this.state.errors} />\n\n          <form onSubmit={this.handleSubmit}>\n\n            <TextField\n              label=\"Old Password\"\n              id=\"oldpassword\"\n              type=\"password\"\n              value={this.state.oldpassword}\n              onChange={this.onInputChange}\n              margin=\"normal\"\n              fullWidth\n            />    \n\n            <TextField\n              label=\"New Password\"\n              id=\"newpassword\"\n              type=\"password\"\n              value={this.state.newpassword}\n              onChange={this.onInputChange}\n              margin=\"normal\"\n              fullWidth\n            /> \n            <TextField\n              label=\"Confirm Password\"\n              id=\"confirmpassword\"\n              type=\"password\"\n              value={this.state.confirmpassword}\n              onChange={this.onInputChange}\n              margin=\"normal\"\n              fullWidth\n            /> \n\n          \n            <div className=\"field\">\n              <p className=\"control\">\n                <a href=\"/forgotpassword\">Forgot password?</a>\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control\">\n\n                <Button type=\"submit\" variant=\"contained\" color=\"primary\" className=\"login-page-btn\">Change Password</Button>\n              </p>\n            </div>\n          </form>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default ChangePassword;"],"sourceRoot":""}