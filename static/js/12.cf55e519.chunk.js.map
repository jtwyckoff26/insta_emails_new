{"version":3,"sources":["components/utility/FormValidation.js","components/FormErrors.js","../node_modules/@material-ui/core/esm/styles/makeStyles.js","components/auth/Login.js"],"names":["validateForm","event","state","inputs","document","getElementsByClassName","i","length","classList","contains","remove","hasOwnProperty","username","getElementById","add","blankfield","firstname","lastname","email","verificationcode","password","oldpassword","newpassword","confirmpassword","passwordmatch","FormErrors","props","formerrors","className","apierrors","cognito","message","code","makeStyles","stylesOrCreator","options","arguments","undefined","makeStylesWithoutDefault","_extends","defaultTheme","styles","theme","root","background","color","border","transition","Login","classes","useState","setUsername","setPassword","isLoading","setLoading","errors","setErrors","useEffect","ReactGA","pageview","ReactPixel","pageView","auth","user","window","Intercom","app_id","attributes","user_id","name","created_at","Date","now","custom_launcher_selector","handleSubmit","a","preventDefault","error","Validate","Auth","signIn","toLowerCase","setAuthStatus","setUser","set","userId","history","goBack","err","style","onSubmit","e","TextField","label","id","type","value","onChange","target","margin","fullWidth","href","LoadingSpinner","Button","variant"],"mappings":"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","file":"static/js/12.cf55e519.chunk.js","sourcesContent":["function validateForm(event, state) {\n  // clear all error messages\n  const inputs = document.getElementsByClassName(\"is-danger\");\n  for (let i = 0; i < inputs.length; i++) {\n    if (!inputs[i].classList.contains(\"error\")) {\n      inputs[i].classList.remove(\"is-danger\");\n    }\n  }\n\n  if (state.hasOwnProperty(\"username\") && state.username === \"\") {\n    document.getElementById(\"username\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"firstname\") && state.firstname === \"\") {\n    document.getElementById(\"firstname\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"lastname\") && state.lastname === \"\") {\n    document.getElementById(\"lastname\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"email\") && state.email === \"\") {\n    document.getElementById(\"email\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (\n    state.hasOwnProperty(\"verificationcode\") &&\n    state.verificationcode === \"\"\n  ) {\n    document.getElementById(\"verificationcode\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"password\") && state.password === \"\") {\n    document.getElementById(\"password\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"oldpassword\") && state.oldpassword === \"\") {\n    document.getElementById(\"oldpassword\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"newpassword\") && state.newpassword === \"\") {\n    document.getElementById(\"newpassword\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (state.hasOwnProperty(\"confirmpassword\") && state.confirmpassword === \"\") {\n    document.getElementById(\"confirmpassword\").classList.add(\"is-danger\");\n    return { blankfield: true };\n  }\n  if (\n    state.hasOwnProperty(\"password\") &&\n    state.hasOwnProperty(\"confirmpassword\") &&\n    state.password !== state.confirmpassword\n  ) {\n    document.getElementById(\"password\").classList.add(\"is-danger\");\n    document.getElementById(\"confirmpassword\").classList.add(\"is-danger\");\n    return { passwordmatch: true };\n  }\n  if (\n    state.hasOwnProperty(\"newpassword\") &&\n    state.hasOwnProperty(\"confirmpassword\") &&\n    state.newpassword !== state.confirmpassword\n  ) {\n    document.getElementById(\"newpassword\").classList.add(\"is-danger\");\n    document.getElementById(\"confirmpassword\").classList.add(\"is-danger\");\n    return { passwordmatch: true };\n  }\n  return;\n}\n\nexport default validateForm;\n","import React from 'react';\n\nfunction FormErrors(props) {\n    if (props.formerrors && (props.formerrors.blankfield || props.formerrors.passwordmatch)) {\n        return (\n            <div className=\"error container help is-danger\">\n                <div className=\"row justify-content-center\">\n                    {props.formerrors.passwordmatch ? 'Password value does not match confirm password value' : ''}\n                </div>\n                <div className=\"row justify-content-center help is-danger\">{props.formerrors.blankfield ? 'All fields are required' : ''}</div>\n            </div>\n        );\n    } else if (props.apierrors) {\n        return (\n            <div className=\"error container help is-danger\">\n                <div className=\"row justify-content-center\">{props.apierrors}</div>\n            </div>\n        );\n    } else if (props.formerrors && props.formerrors.cognito) {\n        return (\n            <div className=\"error container help is-danger\">\n                <div className=\"row justify-content-center\">{props.formerrors.cognito.message}</div>\n            </div>\n        );\n    } else if (props.formerrors && props.formerrors.code) {\n        return (\n            <div className=\"error container help is-danger\">\n                <div className=\"row justify-content-center\">{props.formerrors.message}</div>\n            </div>\n        );\n    } else {\n        return <div />;\n    }\n}\n\nexport default FormErrors;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { makeStyles as makeStylesWithoutDefault } from '@material-ui/styles';\nimport defaultTheme from './defaultTheme';\n\nfunction makeStyles(stylesOrCreator) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return makeStylesWithoutDefault(stylesOrCreator, _extends({\n    defaultTheme: defaultTheme\n  }, options));\n}\n\nexport default makeStyles;","import React, { useState, useEffect } from \"react\";\nimport Validate from \"../utility/FormValidation\";\nimport { Auth } from \"aws-amplify\";\nimport FormErrors from \"../FormErrors\";\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport LoadingSpinner from '../LoadingSpinner.js';\nimport ReactGA from 'react-ga';\nimport ReactPixel from 'react-facebook-pixel';\n\n\nconst styles = makeStyles(theme => ({\n  root: {\n    background:'rgba(0,0,0,0.8)',\n    color:'white',\n    border: '1px solid rgba(255,255,255,0.3)',\n    transition: 'border 0.5s',\n    '&:hover': {\n      transition: 'border 0.5s',\n      background:'rgba(0,0,0,0.8)',\n      border:'1px solid rgba(255,255,255,1)'\n    }\n  },\n}));\n\nexport function Login(props) {\n  const classes = styles();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoading, setLoading] = useState(false);\n\n  const [errors, setErrors] = useState({\n    cognito: null,\n    blankfield: false\n  });\n\n  const clearErrorState = errors => {\n    setErrors({\n      cognito: null,\n      blankfield: false\n    });\n  };\n\n  const componentDidMount = () => {\n      //console.log(this.props.auth);\n      ReactGA.pageview('/login')\n      ReactPixel.pageView('/login')\n      if (props.auth.user) {\n          window.Intercom('boot', {\n             app_id: 's67jlgg6',\n             email: props.auth.user.attributes.email,\n             user_id: props.auth.user.username,\n             name: props.auth.user.attributes.name,\n             created_at: Date.now(),\n             custom_launcher_selector: '#my_custom_link' \n          });\n      } else {\n          window.Intercom('boot', {app_id: 's67jlgg6'});\n      }\n  }\n\n  const componentWillUnmount = () => {\n      window.Intercom('shutdown');\n  }\n\n  useEffect(() => {\n\t\t//console.log(\"use effect\");\n    componentDidMount();\n    // return function cleanup() {\n    //   componentWillUnmount();\n    // };\n\t},[]);\n\n\n  const handleSubmit = async (event, state) => {\n    event.preventDefault();\n    //console.log(state);\n    // Form validation\n    clearErrorState(state.errors);\n    const error = Validate(event, state);\n    if (error) {\n      setErrors({ ...state.errors, ...error });\n    }\n\n    setLoading(true);\n    // AWS Cognito integration here\n    const { username, password } = state;\n    //console.log(\"props\", props);\n\n    try {\n      //console.log(\"BEFORE AUTH.SIGNIN\");\n      const user = await Auth.signIn(username.toLowerCase(), password);\n      //console.log(\"AFTER AUTH.SIGNIN\", user);\n\n      props.auth.setAuthStatus(true);\n      props.auth.setUser(user);\n      ReactGA.set({ userId: username.toLowerCase() });\n\n      //console.log(\"props\", props);\n      // sessionStorage.user_email = props.auth.user.attributes.email;\n      //sessionStorage.user_email = \"patsong17@gmail.com\";\n\n      //console.log(\"after email\", props);\n\n      // sessionStorage.user_id = props.auth.user.attributes.sub;\n      //sessionStorage.user_id = \"patsong17\";\n\n      //console.log(\"after uiserid\", props);\n\n      props.history.goBack();\n    } catch (error) {\n      setLoading(false);\n      let err = null;\n      !error.message ? (err = { message: error }) : (err = error);\n      setErrors({\n        errors,\n        cognito: err\n      });\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"navBar-Margin\">\n      <div style={{'maxWidth':'1000px'}} className=\"form-container\">\n        <h1>Log In</h1>\n        <FormErrors formerrors={errors} />\n        <form\n          onSubmit={e => {\n            handleSubmit(e, {\n              username: username.toLowerCase(),\n              password: password,\n              errors: errors\n            });\n          }}\n        >\n            <div style={{'width':'100%','fontFamily':'Raleway'}}>\n              <TextField\n                label=\"Email\"\n                id=\"username\"\n                style={{'width':'100%', 'maxWidth':'500px','fontFamily':'Raleway'}}\n                type=\"username\"\n                value={username}\n                onChange={e => setUsername(e.target.value)}\n                margin=\"normal\"\n                fullWidth\n              />    \n            </div>\n\n            <div style={{'width':'100%','fontFamily':'Raleway'}}>\n            <TextField\n              label=\"Password\"\n              id=\"password\"\n              style={{'width':'100%', 'maxWidth':'500px','fontFamily':'Raleway'}}\n              type=\"password\"\n              value={password}\n              onChange={e => setPassword(e.target.value)}\n              margin=\"normal\"\n              fullWidth\n            />    \n            </div>\n              <p className=\"control\">\n                <a href=\"/forgotpassword\">Forgot password?</a>\n              </p>\n          {isLoading ? (\n              <LoadingSpinner />\n           ) : (\n          <Button className={classes.root} style={{'borderRadius':'20px','pointerEvents':'auto'}} type=\"submit\" variant=\"contained\" color=\"primary\">Log In</Button>\n\n          )}\n          \n        </form>\n      </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"],"sourceRoot":""}